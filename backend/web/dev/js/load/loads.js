var isFullScreen=false;var mapRendered=false;$(document).bind("webkitfullscreenchange mozfullscreenchange fullscreenchange",function(){isFullScreen=document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen});function previewLoadInfo(e,id){e.preventDefault();if(isFullScreen){$('#map_canvas div.gm-style button[title="Toggle fullscreen view"]').trigger("click")}$.pjax({type:"POST",url:actionPreviewLoadInfo,data:{id:id,showLoadInfo:true},container:"#load-info-preview-pjax",push:false,replace:false,scrollTo:false}).done(function(){showLoadInfoPreviewModal()})}function showLoadInfoPreviewModal(){$("#load-info-preview-modal").modal("show")}function changeMapCollapseButtonText(element,event){event.preventDefault();if($("#L-T-5").hasClass("in")){var html='<i class="fa fa-plus-circle"></i> '+TEXT_SHOW_MAP}else{var html='<i class="fa fa-minus-circle"></i> '+TEXT_HIDE_MAP}$(element).html(html);if(mapRendered===false){renderMapAjax()}}function changeLoadType(element){var type=$(element).val();var pathName=window.location.pathname;var queryParams=replaceQueryParam("type",type,window.location.search);window.history.pushState(null,"",pathName+queryParams);location.reload()}function replaceQueryParam(param,value,search){var regex=new RegExp("([?;&])"+param+"[^&;]*[;&]?");var query=search.replace(regex,"$1").replace(/&$/,"");if(value===""){return query}return(query.length>2?query+"&":"?")+(value?param+"="+value:"")}function filterByLoadCity(element){var loadCityId=$(element).val();var pathName=window.location.pathname;var queryParams=replaceQueryParam("loadCityId",loadCityId,window.location.search);window.history.pushState(null,"",pathName+queryParams);location.reload()}function filterByUnloadCity(element){var unloadCityId=$(element).val();var pathName=window.location.pathname;var queryParams=replaceQueryParam("unloadCityId",unloadCityId,window.location.search);window.history.pushState(null,"",pathName+queryParams);location.reload()}function changePageSize(element){var pageSize=$(element).val();var pathName=window.location.pathname;var queryParams=replaceQueryParam("pageSize",pageSize,window.location.search);window.history.pushState(null,"",pathName+queryParams);location.reload()}function collapseLoadPreview(e,id){e.preventDefault();var td=$("#load-preview-"+id);var tr=td.parent();if(td.text().length==0){$.post(actionPreviewLoadInfo,{id:id},function(content){td.html(content);tr.hasClass("hidden")?tr.removeClass("hidden"):tr.addClass("hidden")})}else{tr.hasClass("hidden")?tr.removeClass("hidden"):tr.addClass("hidden")}}function showLoadLink(e,id){e.preventDefault();$.pjax({type:"POST",url:actionPreviewLoadLink,data:{id:id},container:"#load-link-preview-pjax",push:false,replace:false,scrollTo:false}).done(function(){$("#load-link-preview-modal").modal("show")})}function copyLoadLinkToClipboard(){$("#load-link-field").select();if(document.execCommand("Copy")){$("#load-link-success-alert").fadeIn("slow",function(){$(this).removeClass("hidden")});setTimeout(function(){$("#load-link-success-alert").fadeOut("slow",function(){$(this).addClass("hidden")})},5e3)}}function renderMapAjax(){var load=$("#L-T-5").data("load");$.pjax({type:"POST",url:actionRenderMap,data:{loadCity:load},container:"#L-T-5",cache:false,async:true,push:false}).done(function(){mapRendered=true;loadScript()})}