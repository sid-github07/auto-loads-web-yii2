"use strict";function changeLoadDate(a){$("#MK-C-15_"+a).change(function(){var e=$(this).val();$.pjax({type:"POST",url:appendUrlParams(actionChangeLoadDate),data:{id:a,date:e},container:"#my-loads-table-pjax",push:!1,replace:!1,scrollTo:!1}).done(function(){$.pjax.reload({container:"#toastr-pjax"})})})}function renderLoadEditingForm(a,e){a.preventDefault(),$("#load-announcement-form").html(""),$.pjax({type:"POST",url:appendUrlParams(actionLoadEditingForm),data:{id:e},container:"#edit-load-pjax",push:!1,replace:!1,scrollTo:!1}).done(function(){$("#edit-load-modal").modal("show"),$(".load_cars_editing_container").on("afterInsert",function(){toggleRemoveButtonsVisibility(),toggleRequiredClass(),togglePriceVisibility(),toggleQuantityVisibility(),validateQuantity(),toggleEditableLoadElementsStructure()}).on("afterDelete",function(){toggleRemoveButtonsVisibility(),toggleQuantityVisibility(),validateQuantity(),toggleEditableLoadElementsStructure()})})}function renderAdvertizeForm(a,e){a.preventDefault(),$.pjax({type:"POST",url:appendUrlParams(actionLoadAdvForm),data:{id:e},container:"#adv-load-modal-pjax",push:!1,replace:!1,scrollTo:!1}).done(function(){$("#adv-load-modal").modal("show")})}function renderLoadOpenContactsForm(a,e){a.preventDefault(),$.pjax({type:"POST",url:appendUrlParams(actionLoadOpenContactsForm),data:{id:e},container:"#load-open-contacts-modal-pjax",push:!1,replace:!1,scrollTo:!1}).done(function(){$("#load-open-contacts-modal").modal("show")})}function getUserContacts(a,e,o,t){if(console.log(1),a.preventDefault(),1!==processed[e+o+t]){processed[e+o+t]=1;var n=$("#"+e),i=$("#alert-"+e);if(n.length){var r=n.find("tr[data-user="+t+"]"),l=n.find("tr[data-user-contacts="+t+"]");if(l.length){var d=l.children("td");d.contents().length?(processed[e+o+t]=0,l.toggle()):$.post("/my-load/"+e,{loadId:o,userId:t,action:"get-contacts"},function(a){void 0!==a.error&&null!==a.error&&(d.html(a.error),l.show()),void 0!==a.alert&&void 0!==a.content&&void 0!==a.params&&(r.find("td.viewed").text(a.params.viewed),r.find("td.marker").text(""),processed[e+o+t]=0,d.html(a.content),i.length&&i.html(a.alert),r.css("background-color","#fff"),l.show())})}}}}function renderPreviewForm(a,e){a.preventDefault(),$.pjax({type:"POST",url:appendUrlParams(actionPreviewLoad),data:{loadId:e},container:"#load-preview-modal-pjax",push:!1,replace:!1,scrollTo:!1}).done(function(){$("#load-preview-modal").modal("show")})}function renderCustomLoadForm(a,e,o){$.pjax({type:"POST",url:appendUrlParams(e),data:{loadId:a},container:"#"+o+"-pjax",push:!1,replace:!1,scrollTo:!1}).done(function(){$("#"+o).modal("show")})}function makeLoadsVisible(a,e){if(a.preventDefault(),null==e&&(e=$("#my-loads-grid-view").yiiGridView("getSelectedRows")),$.isNumeric(e)||!$.isEmptyObject(e))return changeLoadsVisibility(e,ACTIVATED)}function makeLoadsInvisible(a,e){if(a.preventDefault(),null==e&&(e=$("#my-loads-grid-view").yiiGridView("getSelectedRows")),$.isNumeric(e)||!$.isEmptyObject(e))return changeLoadsVisibility(e,NOT_ACTIVATED)}function changeLoadsTypeShowing(a){updateUrlParam("load-activity",a),updateUrlParam("load-page",1),$.pjax({type:"POST",url:appendUrlParams(actionChangeLoadTableFiltration),container:"#my-loads-table-pjax",push:!1,replace:!1,scrollTo:!1}).done(function(){$.pjax.reload({container:"#toastr-pjax"})})}function changeLoadsVisibility(a,e){$.pjax({type:"POST",url:appendUrlParams(actionChangeLoadsVisibility),data:{id:a,newStatus:e},container:"#my-loads-table-pjax",push:!1,replace:!1,scrollTo:!1}).done(function(){$.pjax.reload({container:"#toastr-pjax"})})}function removeLoads(a,e){a.preventDefault(),null==e&&(e=$("#my-loads-grid-view").yiiGridView("getSelectedRows")),!$.isNumeric(e)&&$.isEmptyObject(e)||($("#remove-load-button-yes").unbind("click").bind("click",function(){$.pjax({type:"POST",url:appendUrlParams(actionRemoveLoads),data:{id:e},container:"#my-loads-table-pjax",push:!1,replace:!1,scrollTo:!1}).done(function(){$("#remove-load-modal").modal("hide"),$.pjax.reload({container:"#toastr-pjax"})})}),$("#remove-load-modal").modal("show"))}function changeLoadPageSize(a){var e=$(a).val();updateUrlParam("load-page",1),updateUrlParam("load-per-page",e),$.pjax({type:"POST",url:appendUrlParams(actionChangeLoadsPageSize),container:"#my-loads-table-pjax",push:!1,replace:!1,scrollTo:!1}).done(function(){$("."+$(a).attr("class")).val(e)})}$(document).on("pjax:success",function(){$('[data-toggle="tooltip"]').tooltip({trigger:"hover"})});var processed={};$(document).click(function(a){$(a.target).is(".simple-dropdown")||$(a.target).parents(".simple-dropdown").length?$(a.target).parents(".simple-dropdown").find("ul").toggle():$(".simple-dropdown").find("ul").hide()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm15LWFubm91bmNlbWVudC9teS1sb2Fkcy10YWJsZS5qcyJdLCJuYW1lcyI6WyJjaGFuZ2VMb2FkRGF0ZSIsImlkIiwiJCIsImNoYW5nZSIsImRhdGUiLCJ0aGlzIiwidmFsIiwicGpheCIsInR5cGUiLCJ1cmwiLCJhcHBlbmRVcmxQYXJhbXMiLCJhY3Rpb25DaGFuZ2VMb2FkRGF0ZSIsImRhdGEiLCJjb250YWluZXIiLCJwdXNoIiwicmVwbGFjZSIsInNjcm9sbFRvIiwiZG9uZSIsInJlbG9hZCIsInJlbmRlckxvYWRFZGl0aW5nRm9ybSIsImUiLCJwcmV2ZW50RGVmYXVsdCIsImh0bWwiLCJhY3Rpb25Mb2FkRWRpdGluZ0Zvcm0iLCJtb2RhbCIsIm9uIiwidG9nZ2xlUmVtb3ZlQnV0dG9uc1Zpc2liaWxpdHkiLCJ0b2dnbGVSZXF1aXJlZENsYXNzIiwidG9nZ2xlUHJpY2VWaXNpYmlsaXR5IiwidG9nZ2xlUXVhbnRpdHlWaXNpYmlsaXR5IiwidmFsaWRhdGVRdWFudGl0eSIsInRvZ2dsZUVkaXRhYmxlTG9hZEVsZW1lbnRzU3RydWN0dXJlIiwicmVuZGVyQWR2ZXJ0aXplRm9ybSIsImFjdGlvbkxvYWRBZHZGb3JtIiwicmVuZGVyTG9hZE9wZW5Db250YWN0c0Zvcm0iLCJhY3Rpb25Mb2FkT3BlbkNvbnRhY3RzRm9ybSIsImdldFVzZXJDb250YWN0cyIsInNlcnZpY2UiLCJsb2FkSWQiLCJ1c2VySWQiLCJjb25zb2xlIiwibG9nIiwicHJvY2Vzc2VkIiwidGFibGUiLCJhbGVydCIsImxlbmd0aCIsInRyUGFyZW50IiwiZmluZCIsInRyIiwidGQiLCJjaGlsZHJlbiIsImNvbnRlbnRzIiwidG9nZ2xlIiwicG9zdCIsImFjdGlvbiIsInJlc3BvbnNlIiwidW5kZWZpbmVkIiwiZXJyb3IiLCJzaG93IiwiY29udGVudCIsInBhcmFtcyIsInRleHQiLCJjc3MiLCJyZW5kZXJQcmV2aWV3Rm9ybSIsImFjdGlvblByZXZpZXdMb2FkIiwicmVuZGVyQ3VzdG9tTG9hZEZvcm0iLCJmb3JtIiwibWFrZUxvYWRzVmlzaWJsZSIsInlpaUdyaWRWaWV3IiwiaXNOdW1lcmljIiwiaXNFbXB0eU9iamVjdCIsImNoYW5nZUxvYWRzVmlzaWJpbGl0eSIsIkFDVElWQVRFRCIsIm1ha2VMb2Fkc0ludmlzaWJsZSIsIk5PVF9BQ1RJVkFURUQiLCJjaGFuZ2VMb2Fkc1R5cGVTaG93aW5nIiwiZWxlbWVudCIsInVwZGF0ZVVybFBhcmFtIiwiYWN0aW9uQ2hhbmdlTG9hZFRhYmxlRmlsdHJhdGlvbiIsIm5ld1N0YXR1cyIsImFjdGlvbkNoYW5nZUxvYWRzVmlzaWJpbGl0eSIsInJlbW92ZUxvYWRzIiwidW5iaW5kIiwiYmluZCIsImFjdGlvblJlbW92ZUxvYWRzIiwiY2hhbmdlTG9hZFBhZ2VTaXplIiwicGFnZVNpemUiLCJhY3Rpb25DaGFuZ2VMb2Fkc1BhZ2VTaXplIiwiYXR0ciIsImRvY3VtZW50IiwidG9vbHRpcCIsInRyaWdnZXIiLCJjbGljayIsInRhcmdldCIsImlzIiwicGFyZW50cyIsImhpZGUiXSwibWFwcGluZ3MiOiJBQUFBLFlBMEJBLFNBQVNBLGdCQUFlQyxHQUNwQkMsRUFBRSxZQUFjRCxHQUFJRSxPQUFPLFdBQ3ZCLEdBQUlDLEdBQU9GLEVBQUVHLE1BQU1DLEtBQ25CSixHQUFFSyxNQUNFQyxLQUFNLE9BQ05DLElBQUtDLGdCQUFnQkMsc0JBQ3JCQyxNQUNJWCxHQUFJQSxFQUNKRyxLQUFNQSxHQUVWUyxVQUFXLHVCQUNYQyxNQUFNLEVBQ05DLFNBQVMsRUFDVEMsVUFBVSxJQUNYQyxLQUFLLFdBQ0pmLEVBQUVLLEtBQUtXLFFBQVNMLFVBQVcscUJBV3ZDLFFBQVNNLHVCQUFzQkMsRUFBR25CLEdBQzlCbUIsRUFBRUMsaUJBQ0ZuQixFQUFFLDJCQUEyQm9CLEtBQUssSUFDbENwQixFQUFFSyxNQUNFQyxLQUFNLE9BQ05DLElBQUtDLGdCQUFnQmEsdUJBQ3JCWCxNQUFRWCxHQUFJQSxHQUNaWSxVQUFXLGtCQUNYQyxNQUFNLEVBQ05DLFNBQVMsRUFDVEMsVUFBVSxJ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LE1BQVFYLEdBQUlBLEdBQ1pZLFVBQVcsdUJBQ1hDLE1BQU0sRUFDTkMsU0FBUyxFQUNUQyxVQUFVLElBQ1hDLEtBQUssV0FDSmYsRUFBRSxzQkFBc0JzQixNQUFNLFFBQzlCdEIsRUFBRUssS0FBS1csUUFBU0wsVUFBVyxxQkFJbkNYLEVBQUUsc0JBQXNCc0IsTUFBTSxTQVFsQyxRQUFTNkQsb0JBQW1CVCxHQUN4QixHQUFJVSxHQUFXcEYsRUFBRTBFLEdBQVN0RSxLQUMxQnVFLGdCQUFlLFlBQWEsR0FDNUJBLGVBQWUsZ0JBQWlCUyxHQUVoQ3BGLEVBQUVLLE1BQ0VDLEtBQU0sT0FDTkMsSUFBS0MsZ0JBQWdCNkUsMkJBQ3JCMUUsVUFBVyx1QkFDWEMsTUFBTSxFQUNOQyxTQUFTLEVBQ1RDLFVBQVUsSUFDWEMsS0FBSyxXQUNKZixFQUFFLElBQU1BLEVBQUUwRSxHQUFTWSxLQUFLLFVBQVVsRixJQUFJZ0YsS0FuVTlDcEYsRUFBRXVGLFVBQVVoRSxHQUFHLGVBQWdCLFdBQzNCdkIsRUFBRSwyQkFBMkJ3RixTQUN6QkMsUUFBUyxXQWdIakIsSUFBSWpELGFBcU5KeEMsR0FBRXVGLFVBQVVHLE1BQU0sU0FBVXhFLEdBQ3BCbEIsRUFBRWtCLEVBQUV5RSxRQUFRQyxHQUFHLHFCQUF1QjVGLEVBQUVrQixFQUFFeUUsUUFBUUUsUUFBUSxvQkFBb0JsRCxPQUM5RTNDLEVBQUVrQixFQUFFeUUsUUFBUUUsUUFBUSxvQkFBb0JoRCxLQUFLLE1BQU1LLFNBRW5EbEQsRUFBRSxvQkFBb0I2QyxLQUFLLE1BQU1pRCIsImZpbGUiOiJteS1hbm5vdW5jZW1lbnQvbXktbG9hZHMtdGFibGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBnbG9iYWxcclxuYWN0aW9uQ2hhbmdlTG9hZERhdGUsXHJcbmFjdGlvbkxvYWRFZGl0aW5nRm9ybSxcclxuYWN0aW9uQ2hhbmdlTG9hZHNWaXNpYmlsaXR5LFxyXG5hY3Rpb25SZW1vdmVMb2FkcyxcclxuYWN0aW9uQ2hhbmdlTG9hZHNQYWdlU2l6ZSxcclxuQUNUSVZBVEVELFxyXG5OT1RfQUNUSVZBVEVEXHJcbiovXHJcblxyXG4vKipcclxuICogQmluZHMgdG9vbHRpcCBvbiBlYWNoIHN1Y2Nlc3NmdWwgUEpBWCByZXF1ZXN0XHJcbiAqL1xyXG4kKGRvY3VtZW50KS5vbigncGpheDpzdWNjZXNzJywgZnVuY3Rpb24oKSB7XHJcbiAgICAkKCdbZGF0YS10b2dnbGU9XCJ0b29sdGlwXCJdJykudG9vbHRpcCh7XHJcbiAgICAgICAgdHJpZ2dlcjogJ2hvdmVyJ1xyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxuLyoqXHJcbiAqIENoYW5nZXMgbG9hZCBkYXRlXHJcbiAqXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBpZCBTcGVjaWZpYyBsb2FkIElEIHdob3NlIGRhdGUgbmVlZHMgdG8gYmUgY2hhbmdlZFxyXG4gKi9cclxuZnVuY3Rpb24gY2hhbmdlTG9hZERhdGUoaWQpIHtcclxuICAgICQoJyNNSy1DLTE1XycgKyBpZCkuY2hhbmdlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZGF0ZSA9ICQodGhpcykudmFsKCk7XHJcbiAgICAgICAgJC5wamF4KHtcclxuICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxyXG4gICAgICAgICAgICB1cmw6IGFwcGVuZFVybFBhcmFtcyhhY3Rpb25DaGFuZ2VMb2FkRGF0ZSksXHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIGlkOiBpZCxcclxuICAgICAgICAgICAgICAgIGRhdGU6IGRhdGVcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgY29udGFpbmVyOiAnI215LWxvYWRzLXRhYmxlLXBqYXgnLFxyXG4gICAgICAgICAgICBwdXNoOiBmYWxzZSxcclxuICAgICAgICAgICAgcmVwbGFjZTogZmFsc2UsXHJcbiAgICAgICAgICAgIHNjcm9sbFRvOiBmYWxzZVxyXG4gICAgICAgIH0pLmRvbmUoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkLnBqYXgucmVsb2FkKHtjb250YWluZXI6ICcjdG9hc3RyLXBqYXgnfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFJlbmRlcnMgbG9hZCBlZGl0aW5nIGZvcm1cclxuICpcclxuICogQHBhcmFtIHtvYmplY3R9IGUgRXZlbnQgb2JqZWN0XHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBpZCBTcGVjaWZpYyBsb2FkIElEIHRoYXQgZWRpdCBmb3IgbmVlZHMgdG8gYmUgcmVuZGVyZWRcclxuICovXHJcbmZ1bmN0aW9uIHJlbmRlckxvYWRFZGl0aW5nRm9ybShlLCBpZCkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgJCgnI2xvYWQtYW5ub3VuY2VtZW50LWZvcm0nKS5odG1sKFwiXCIpO1xyXG4gICAgJC5wamF4KHtcclxuICAgICAgICB0eXBlOiAnUE9TVCcsXHJcbiAgICAgICAgdXJsOiBhcHBlbmRVcmxQYXJhbXMoYWN0aW9uTG9hZEVkaXRpbmdGb3JtKSxcclxuICAgICAgICBkYXRhOiB7aWQ6IGlkfSxcclxuICAgICAgICBjb250YWluZXI6ICcjZWRpdC1sb2FkLXBqYXgnLFxyXG4gICAgICAgIHB1c2g6IGZhbHNlLFxyXG4gICAgICAgIHJlcGxhY2U6IGZhbHNlLFxyXG4gICAgICAgIHNjcm9sbFRvOiBmYWxzZVxyXG4gICAgfSkuZG9uZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCgnI2VkaXQtbG9hZC1tb2RhbCcpLm1vZGFsKCdzaG93Jyk7XHJcbiAgICAgICAgJCgnLmxvYWRfY2Fyc19lZGl0aW5nX2NvbnRhaW5lcicpLm9uKCdhZnRlckluc2VydCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdG9nZ2xlUmVtb3ZlQnV0dG9uc1Zpc2liaWxpdHkoKTtcclxuICAgICAgICAgICAgdG9nZ2xlUmVxdWlyZWRDbGFzcygpO1xyXG4gICAgICAgICAgICB0b2dnbGVQcmljZVZpc2liaWxpdHkoKTtcclxuICAgICAgICAgICAgdG9nZ2xlUXVhbnRpdHlWaXNpYmlsaXR5KCk7XHJcbiAgICAgICAgICAgIHZhbGlkYXRlUXVhbnRpdHkoKTtcclxuICAgICAgICAgICAgdG9nZ2xlRWRpdGFibGVMb2FkRWxlbWVudHNTdHJ1Y3R1cmUoKTtcclxuICAgICAgICB9KS5vbignYWZ0ZXJEZWxldGUnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHRvZ2dsZVJlbW92ZUJ1dHRvbnNWaXNpYmlsaXR5KCk7XHJcbiAgICAgICAgICAgIHRvZ2dsZVF1YW50aXR5VmlzaWJpbGl0eSgpO1xyXG4gICAgICAgICAgICB2YWxpZGF0ZVF1YW50aXR5KCk7XHJcbiAgICAgICAgICAgIHRvZ2dsZUVkaXRhYmxlTG9hZEVsZW1lbnRzU3RydWN0dXJlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFJlbmRlcnMgbG9hZCBhZHZlcnQgZm9ybVxyXG4gKlxyXG4gKiBAcGFyYW0ge29iamVjdH0gZSBFdmVudCBvYmplY3RcclxuICogQHBhcmFtIHtudW1iZXJ9IGlkIFNwZWNpZmljIGxvYWQgSUQgdGhhdCBlZGl0IGZvciBuZWVkcyB0byBiZSByZW5kZXJlZFxyXG4gKi9cclxuZnVuY3Rpb24gcmVuZGVyQWR2ZXJ0aXplRm9ybShlLCBpZCkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgJC5wamF4KHtcclxuICAgICAgICB0eXBlOiAnUE9TVCcsXHJcbiAgICAgICAgdXJsOiBhcHBlbmRVcmxQYXJhbXMoYWN0aW9uTG9hZEFkdkZvcm0pLFxyXG4gICAgICAgIGRhdGE6IHsgaWQ6IGlkIH0sXHJcbiAgICAgICAgY29udGFpbmVyOiAnI2Fkdi1sb2FkLW1vZGFsLXBqYXgnLFxyXG4gICAgICAgIHB1c2g6IGZhbHNlLFxyXG4gICAgICAgIHJlcGxhY2U6IGZhbHNlLFxyXG4gICAgICAgIHNjcm9sbFRvOiBmYWxzZVxyXG4gICAgfSkuZG9uZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCgnI2Fkdi1sb2FkLW1vZGFsJykubW9kYWwoJ3Nob3cnKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG4vKipcclxuICogUmVuZGVycyBvcGVuIGNvbnRhY3RzIGZvcm1cclxuICpcclxuICogQHBhcmFtIHtvYmplY3R9IGUgRXZlbnQgb2JqZWN0XHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBpZCBTcGVjaWZpYyBsb2FkIElEIHRoYXQgZWRpdCBmb3IgbmVlZHMgdG8gYmUgcmVuZGVyZWRcclxuICovXHJcbmZ1bmN0aW9uIHJlbmRlckxvYWRPcGVuQ29udGFjdHNGb3JtKGUsIGlkKSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAkLnBqYXgoe1xyXG4gICAgICAgIHR5cGU6ICdQT1NUJyxcclxuICAgICAgICB1cmw6IGFwcGVuZFVybFBhcmFtcyhhY3Rpb25Mb2FkT3BlbkNvbnRhY3RzRm9ybSksXHJcbiAgICAgICAgZGF0YToge2lkOiBpZH0sXHJcbiAgICAgICAgY29udGFpbmVyOiAnI2xvYWQtb3Blbi1jb250YWN0cy1tb2RhbC1wamF4JyxcclxuICAgICAgICBwdXNoOiBmYWxzZSxcclxuICAgICAgICByZXBsYWNlOiBmYWxzZSxcclxuICAgICAgICBzY3JvbGxUbzogZmFsc2VcclxuICAgIH0pLmRvbmUoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoJyNsb2FkLW9wZW4tY29udGFjdHMtbW9kYWwnKS5tb2RhbCgnc2hvdycpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAcGFyYW0ge29iamVjdH0gZSBFdmVudCBvYmplY3RcclxuICogQHBhcmFtIHtzdHJpbmd9IHNlcnZpY2Ugc2VydmljZSBuYW1lXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBsb2FkSWQgTG9hZCBJRFxyXG4gKiBAcGFyYW0ge251bWJlcn0gdXNlcklkIFVzZXIgSURcclxuICovXHJcbnZhciBwcm9jZXNzZWQgPSB7fTtcclxuZnVuY3Rpb24gZ2V0VXNlckNvbnRhY3RzKGUsIHNlcnZpY2UsIGxvYWRJZCwgdXNlcklkKSB7XHJcbiAgICBjb25zb2xlLmxvZygxKTtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIGlmIChwcm9jZXNzZWRbc2VydmljZSArIGxvYWRJZCArIHVzZXJJZF0gPT09IDEpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBwcm9jZXNzZWRbc2VydmljZSArIGxvYWRJZCArIHVzZXJJZF0gPSAxO1xyXG5cclxuICAgIHZhciB0YWJsZSA9ICQoJyMnICsgc2VydmljZSk7XHJcbiAgICB2YXIgYWxlcnQgPSAkKCcjYWxlcnQtJyArIHNlcnZpY2UpO1xyXG4gICAgaWYgKHRhYmxlLmxlbmd0aCkge1xyXG4gICAgICAgIHZhciB0clBhcmVudCA9IHRhYmxlLmZpbmQoJ3RyW2RhdGEtdXNlcj0nICsgdXNlcklkICsgJ10nKTtcclxuICAgICAgICB2YXIgdHIgPSB0YWJsZS5maW5kKCd0cltkYXRhLXVzZXItY29udGFjdHM9JyArIHVzZXJJZCArICddJyk7XHJcbiAgICAgICAgaWYgKHRyLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB2YXIgdGQgPSB0ci5jaGlsZHJlbigndGQnKTtcclxuICAgICAgICAgICAgaWYgKCF0ZC5jb250ZW50cygpLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgJC5wb3N0KCcvbXktbG9hZC8nICsgc2VydmljZSwge2xvYWRJZDogbG9hZElkLCB1c2VySWQ6IHVzZXJJZCwgYWN0aW9uOiAnZ2V0LWNvbnRhY3RzJ30sIGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5lcnJvciAhPT0gdW5kZWZpbmVkICYmIHJlc3BvbnNlLmVycm9yICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICB0ZC5odG1sKHJlc3BvbnNlLmVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgIHRyLnNob3coKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmFsZXJ0ICE9PSB1bmRlZmluZWQgJiYgcmVzcG9uc2UuY29udGVudCAhPT0gdW5kZWZpbmVkICYmIHJlc3BvbnNlLnBhcmFtcyAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyUGFyZW50LmZpbmQoJ3RkLnZpZXdlZCcpLnRleHQocmVzcG9uc2UucGFyYW1zWyd2aWV3ZWQnXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyUGFyZW50LmZpbmQoJ3RkLm1hcmtlcicpLnRleHQoJycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzZWRbc2VydmljZSArIGxvYWRJZCArIHVzZXJJZF0gPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZC5odG1sKHJlc3BvbnNlLmNvbnRlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWxlcnQubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQuaHRtbChyZXNwb25zZS5hbGVydCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJQYXJlbnQuY3NzKCdiYWNrZ3JvdW5kLWNvbG9yJywgJyNmZmYnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHIuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcHJvY2Vzc2VkW3NlcnZpY2UgKyBsb2FkSWQgKyB1c2VySWRdID0gMDtcclxuICAgICAgICAgICAgICAgIHRyLnRvZ2dsZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIFJlbmRlcnMgbG9hZCBhZHZlcnQgZm9ybVxyXG4gKlxyXG4gKiBAcGFyYW0ge29iamVjdH0gZSBFdmVudCBvYmplY3RcclxuICogQHBhcmFtIHtudW1iZXJ9IGlkIFNwZWNpZmljIGxvYWQgSUQgdGhhdCBlZGl0IGZvciBuZWVkcyB0byBiZSByZW5kZXJlZFxyXG4gKi9cclxuZnVuY3Rpb24gcmVuZGVyUHJldmlld0Zvcm0oZSwgaWQpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICQucGpheCh7XHJcbiAgICAgICAgdHlwZTogJ1BPU1QnLFxyXG4gICAgICAgIHVybDogYXBwZW5kVXJsUGFyYW1zKGFjdGlvblByZXZpZXdMb2FkKSxcclxuICAgICAgICBkYXRhOiB7IGxvYWRJZDogaWQgfSxcclxuICAgICAgICBjb250YWluZXI6ICcjbG9hZC1wcmV2aWV3LW1vZGFsLXBqYXgnLFxyXG4gICAgICAgIHB1c2g6IGZhbHNlLFxyXG4gICAgICAgIHJlcGxhY2U6IGZhbHNlLFxyXG4gICAgICAgIHNjcm9sbFRvOiBmYWxzZVxyXG4gICAgfSkuZG9uZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCgnI2xvYWQtcHJldmlldy1tb2RhbCcpLm1vZGFsKCdzaG93Jyk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVuZGVyQ3VzdG9tTG9hZEZvcm0oaWQsIHVybCwgZm9ybSkge1xyXG4gICAgJC5wamF4KHtcclxuICAgICAgICB0eXBlOiAnUE9TVCcsXHJcbiAgICAgICAgdXJsOiBhcHBlbmRVcmxQYXJhbXModXJsKSxcclxuICAgICAgICBkYXRhOiB7IGxvYWRJZDogaWQgfSxcclxuICAgICAgICBjb250YWluZXI6ICcjJyArIGZvcm0gKyAnLXBqYXgnLFxyXG4gICAgICAgIHB1c2g6IGZhbHNlLFxyXG4gICAgICAgIHJlcGxhY2U6IGZhbHNlLFxyXG4gICAgICAgIHNjcm9sbFRvOiBmYWxzZVxyXG4gICAgfSkuZG9uZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCgnIycgKyBmb3JtKS5tb2RhbCgnc2hvdycpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBNYWtlcyBtdWx0aXBsZSBvciBzcGVjaWZpYyBsb2FkIHZpc2libGVcclxuICpcclxuICogQHBhcmFtIHtvYmplY3R9IGUgRXZlbnQgb2JqZWN0XHJcbiAqIEBwYXJhbSB7bnVtYmVyfG51bGx8b2JqZWN0fSBpZCBTcGVjaWZpYyBsb2FkIElEIHRoYXQgbmVlZHMgdG8gYmUgbWFkZSB2aXNpYmxlXHJcbiAqL1xyXG5mdW5jdGlvbiBtYWtlTG9hZHNWaXNpYmxlKGUsIGlkKSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgaWYgKGlkID09IG51bGwpIHtcclxuICAgICAgICBpZCA9ICQoJyNteS1sb2Fkcy1ncmlkLXZpZXcnKS55aWlHcmlkVmlldygnZ2V0U2VsZWN0ZWRSb3dzJyk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCQuaXNOdW1lcmljKGlkKSB8fCAhJC5pc0VtcHR5T2JqZWN0KGlkKSkge1xyXG4gICAgICAgIHJldHVybiBjaGFuZ2VMb2Fkc1Zpc2liaWxpdHkoaWQsIEFDVElWQVRFRCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBNYWtlcyBtdWx0aXBsZSBvciBzcGVjaWZpYyBsb2FkIGludmlzaWJsZVxyXG4gKlxyXG4gKiBAcGFyYW0ge29iamVjdH0gZSBFdmVudCBvYmplY3RcclxuICogQHBhcmFtIHtudW1iZXJ8bnVsbHxvYmplY3R9IGlkIFNwZWNpZmljIGxvYWQgSUQgdGhhdCBuZWVkcyB0byBiZSBtYWRlIGludmlzaWJsZVxyXG4gKi9cclxuZnVuY3Rpb24gbWFrZUxvYWRzSW52aXNpYmxlKGUsIGlkKSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgaWYgKGlkID09IG51bGwpIHtcclxuICAgICAgICBpZCA9ICQoJyNteS1sb2Fkcy1ncmlkLXZpZXcnKS55aWlHcmlkVmlldygnZ2V0U2VsZWN0ZWRSb3dzJyk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCQuaXNOdW1lcmljKGlkKSB8fCAhJC5pc0VtcHR5T2JqZWN0KGlkKSkge1xyXG4gICAgICAgIHJldHVybiBjaGFuZ2VMb2Fkc1Zpc2liaWxpdHkoaWQsIE5PVF9BQ1RJVkFURUQpO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogQ2hhbmdlcyB2aXNpYmlsaXR5IG9mIGxvYWRzXHJcbiAqXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBlbGVtZW50IGNoYW5nZWQgbG9hZHMgdmlldyBzdGF0dXNcclxuICovXHJcbmZ1bmN0aW9uIGNoYW5nZUxvYWRzVHlwZVNob3dpbmcoZWxlbWVudCkge1xyXG4gICAgdXBkYXRlVXJsUGFyYW0oJ2xvYWQtYWN0aXZpdHknLCBlbGVtZW50KTtcclxuICAgIHVwZGF0ZVVybFBhcmFtKCdsb2FkLXBhZ2UnLCAxKTtcclxuICAgICQucGpheCh7XHJcbiAgICAgICAgdHlwZTogJ1BPU1QnLFxyXG4gICAgICAgIHVybDogYXBwZW5kVXJsUGFyYW1zKGFjdGlvbkNoYW5nZUxvYWRUYWJsZUZpbHRyYXRpb24pLFxyXG4gICAgICAgIGNvbnRhaW5lcjogJyNteS1sb2Fkcy10YWJsZS1wamF4JyxcclxuICAgICAgICBwdXNoOiBmYWxzZSxcclxuICAgICAgICByZXBsYWNlOiBmYWxzZSxcclxuICAgICAgICBzY3JvbGxUbzogZmFsc2VcclxuICAgIH0pLmRvbmUoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQucGpheC5yZWxvYWQoe2NvbnRhaW5lcjogJyN0b2FzdHItcGpheCd9KTtcclxuICAgIH0pO1xyXG59XHJcblxyXG4vKipcclxuICogQ2hhbmdlcyBtdWx0aXBsZSBvciBzcGVjaWZpYyBsb2FkIHZpc2liaWxpdHlcclxuICpcclxuICogQHBhcmFtIHtudW1iZXJ8YXJyYXl9IGlkIExpc3Qgb2YgbG9hZHMgSURzIG9yIGNvbmNyZXRlIGxvYWQgSUQgdGhhdCBzdGF0dXMgbmVlZHMgdG8gYmUgY2hhbmdlZFxyXG4gKiBAcGFyYW0ge251bWJlcn0gbmV3U3RhdHVzIE5ldyBsb2FkcyBzdGF0dXNcclxuICovXHJcbmZ1bmN0aW9uIGNoYW5nZUxvYWRzVmlzaWJpbGl0eShpZCwgbmV3U3RhdHVzKSB7XHJcbiAgICAkLnBqYXgoe1xyXG4gICAgICAgIHR5cGU6ICdQT1NUJyxcclxuICAgICAgICB1cmw6IGFwcGVuZFVybFBhcmFtcyhhY3Rpb25DaGFuZ2VMb2Fkc1Zpc2liaWxpdHkpLFxyXG4gICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgaWQ6IGlkLFxyXG4gICAgICAgICAgICBuZXdTdGF0dXM6IG5ld1N0YXR1c1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY29udGFpbmVyOiAnI215LWxvYWRzLXRhYmxlLXBqYXgnLFxyXG4gICAgICAgIHB1c2g6IGZhbHNlLFxyXG4gICAgICAgIHJlcGxhY2U6IGZhbHNlLFxyXG4gICAgICAgIHNjcm9sbFRvOiBmYWxzZVxyXG4gICAgfSkuZG9uZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJC5wamF4LnJlbG9hZCh7Y29udGFpbmVyOiAnI3RvYXN0ci1wamF4J30pO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZW1vdmVzIG11bHRpcGxlIG9yIHNwZWNpZmljIGxvYWRcclxuICpcclxuICogQHBhcmFtIHtvYmplY3R9IGUgRXZlbnQgb2JqZWN0XHJcbiAqIEBwYXJhbSB7bnVtYmVyfG51bGx9IGlkIExpc3Qgb2YgbG9hZHMgSURzIG9yIGNvbmNyZXRlIGxvYWQgSUQgdGhhdCBuZWVkcyB0byBiZSBkZWxldGVkXHJcbiAqL1xyXG5mdW5jdGlvbiByZW1vdmVMb2FkcyhlLCBpZCkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgIGlmIChpZCA9PSBudWxsKSB7XHJcbiAgICAgICAgaWQgPSAkKCcjbXktbG9hZHMtZ3JpZC12aWV3JykueWlpR3JpZFZpZXcoJ2dldFNlbGVjdGVkUm93cycpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghJC5pc051bWVyaWMoaWQpICYmICQuaXNFbXB0eU9iamVjdChpZCkpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgJCgnI3JlbW92ZS1sb2FkLWJ1dHRvbi15ZXMnKS51bmJpbmQoJ2NsaWNrJykuYmluZCgnY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJC5wamF4KHtcclxuICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxyXG4gICAgICAgICAgICB1cmw6IGFwcGVuZFVybFBhcmFtcyhhY3Rpb25SZW1vdmVMb2FkcyksXHJcbiAgICAgICAgICAgIGRhdGE6IHtpZDogaWR9LFxyXG4gICAgICAgICAgICBjb250YWluZXI6ICcjbXktbG9hZHMtdGFibGUtcGpheCcsXHJcbiAgICAgICAgICAgIHB1c2g6IGZhbHNlLFxyXG4gICAgICAgICAgICByZXBsYWNlOiBmYWxzZSxcclxuICAgICAgICAgICAgc2Nyb2xsVG86IGZhbHNlXHJcbiAgICAgICAgfSkuZG9uZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICQoJyNyZW1vdmUtbG9hZC1tb2RhbCcpLm1vZGFsKCdoaWRlJyk7XHJcbiAgICAgICAgICAgICQucGpheC5yZWxvYWQoe2NvbnRhaW5lcjogJyN0b2FzdHItcGpheCd9KTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgICQoJyNyZW1vdmUtbG9hZC1tb2RhbCcpLm1vZGFsKCdzaG93Jyk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDaGFuZ2VzIGxvYWRzIHRhYmxlIHBhZ2Ugc2l6ZVxyXG4gKlxyXG4gKiBAcGFyYW0ge29iamVjdH0gZWxlbWVudCBUaGlzIG9iamVjdFxyXG4gKi9cclxuZnVuY3Rpb24gY2hhbmdlTG9hZFBhZ2VTaXplKGVsZW1lbnQpIHtcclxuICAgIHZhciBwYWdlU2l6ZSA9ICQoZWxlbWVudCkudmFsKCk7XHJcbiAgICB1cGRhdGVVcmxQYXJhbSgnbG9hZC1wYWdlJywgMSk7XHJcbiAgICB1cGRhdGVVcmxQYXJhbSgnbG9hZC1wZXItcGFnZScsIHBhZ2VTaXplKTtcclxuXHJcbiAgICAkLnBqYXgoe1xyXG4gICAgICAgIHR5cGU6ICdQT1NUJyxcclxuICAgICAgICB1cmw6IGFwcGVuZFVybFBhcmFtcyhhY3Rpb25DaGFuZ2VMb2Fkc1BhZ2VTaXplKSxcclxuICAgICAgICBjb250YWluZXI6ICcjbXktbG9hZHMtdGFibGUtcGpheCcsXHJcbiAgICAgICAgcHVzaDogZmFsc2UsXHJcbiAgICAgICAgcmVwbGFjZTogZmFsc2UsXHJcbiAgICAgICAgc2Nyb2xsVG86IGZhbHNlXHJcbiAgICB9KS5kb25lKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKCcuJyArICQoZWxlbWVudCkuYXR0cignY2xhc3MnKSkudmFsKHBhZ2VTaXplKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG4kKGRvY3VtZW50KS5jbGljayhmdW5jdGlvbiAoZSkge1xyXG4gICAgaWYgKCQoZS50YXJnZXQpLmlzKCcuc2ltcGxlLWRyb3Bkb3duJykgfHwgJChlLnRhcmdldCkucGFyZW50cygnLnNpbXBsZS1kcm9wZG93bicpLmxlbmd0aCkge1xyXG4gICAgICAkKGUudGFyZ2V0KS5wYXJlbnRzKCcuc2ltcGxlLWRyb3Bkb3duJykuZmluZCgndWwnKS50b2dnbGUoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICQoJy5zaW1wbGUtZHJvcGRvd24nKS5maW5kKCd1bCcpLmhpZGUoKTtcclxuICAgIH1cclxufSk7Il19
